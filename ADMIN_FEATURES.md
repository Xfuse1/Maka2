# ููุฒุงุช ููุญุฉ ุงูุฅุฏุงุฑุฉ โ MakaStore (Admin Features)

ููู ููุฌุฒ ููุถูุญ ูู ุงูููุฒุงุช ุงููุชุงุญุฉ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ุฏุงุฎู ุงููุดุฑูุน โ ููุงุณุจ ูููุณุฎ ุฅูู README ุฃู ููุดูุฑ LinkedIn.

## ููุฎุต ุณุฑูุน ูููุณุฎ ุนูู LinkedIn

ููุฉ | MakaStore โ ููุญุฉ ุฅุฏุงุฑุฉ ูุชูุงููุฉ ูููุชุงุฌุฑ ุงูุฅููุชุฑูููุฉ (RTL-ready). ุฅุฏุงุฑุฉ ุงูููุชุฌุงุชุ ุงูุทูุจุงุชุ ุงููุฏููุนุงุชุ ุงูุนุฑูุถุ ุงููุญุชููุ ูุงูุชุญูููุงุช ูููุง ูู ููุญุฉ ูุงุญุฏุฉ ูุน ุถูุงุจุท ุฃูุงู ูููุฉ (RLSุ webhooksุ service-role admin client).

## ุตูุญุงุช ุงูู Admin ูุงูููุฒุงุช (ููุตููุฉ)

- **ููุญุฉ ุงูุชุญูู (Dashboard)**
  - ุฅุญุตุงุกุงุช ุณุฑูุนุฉ: ุฅุฌูุงูู ุงููุจูุนุงุชุ ุนุฏุฏ ุงูุทูุจุงุชุ ุงูููุชุฌุงุชุ ุงูุนููุงุกุ ุฅูุฑุงุฏุงุช ุดูุฑูุฉ.
  - ูุงุฆูุฉ ุงูุทูุจุงุช ุงูุฃุฎูุฑุฉุ ููุชุฌุงุช ุดุงุฆุนุฉุ ุฑูุงุจุท ุณุฑูุนุฉ ููุนุฑุถ.

- **ุงูุทูุจุงุช (Admin /orders)**
  - ุนุฑุถ ุตูุญุงุช ุงูุทูุจุงุช ูุน ุจุญุซ ูุชูุฏููุ ููุชุฑุฉุ ูุชูููู ููุฑุฒ ุญุณุจ ุงูููู.
  - ุนุฑุถ ุชูุงุตูู ุงูุทูุจุ ุนูุงุตุฑ ุงูุทูุจุ ุงูุนููุงูุ ูุฅุฌุฑุงุกุงุช: ุชุญุฏูุซ ุงูุญุงูุฉุ ุญุฐู ุงูุทูุจ.
  - ุชุญุฏูุซ ุงูุญุงูุฉ ุนุจุฑ API ูุญููุ ุญุฐู/ุงุณุชุฑุฌุงุนุ ุทูุจุงุช ุตูุญุงุช ูุฑูุฉ.

- **ุงูููุชุฌุงุช (Admin /products)**
  - CRUD ูุงูู ููููุชุฌุงุช.
  - ุฑูุน ุตูุฑ ูุชุนุฏุฏุฉุ ุฅูุดุงุก/ุชุนุฏูู ูุชุบูุฑุงุช (variants)ุ ุชูููุฏ SKU ุขูู.
  - ุฅุฏุงุฑุฉ ุงููุฎุฒููุ ููุงุชุฑุ paginationุ ุชุญููู ูููู ูุจู ุงูุญูุธ.
  - **ุฃุฒุฑุงุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI):**
    - **ุชุญุณูู ุงููุตู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู:** ุฒุฑ ุชุญุช ุงููุตู ุงูุนุฑุจู ูุชุญุณูู ูุตู ุงูููุชุฌ ุจุงุณุชุฎุฏุงู Perplexity AIุ ูุน ุงูุญูุงุธ ุนูู ุงูุญูุงุฆู ุงููุฐููุฑุฉ ููุท.
    - **ุชุฑุฌูุฉ ุนุฑุจู โ ุฅูุฌููุฒู (ุงุญุชุฑุงูู):** ุฒุฑ ุชุญุช ุงููุตู ุงูุฅูุฌููุฒู ูุชุฑุฌูุฉ ุงููุตู ุงูุนุฑุจู ุฅูู ุฅูุฌููุฒู ุงุญุชุฑุงูู.
    - ุญุงูุงุช ุงูุชุญูููุ ุฑุณุงุฆู ุงูุฃุฎุทุงุกุ ูุงูุชุญูู ูู ุทูู ุงููุตู (10 ุฃุญุฑู ุนูู ุงูุฃูู).

- **ุงููุฆุงุช (Categories)**
  - ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ูุฆุงุช ูุน ุฑูุน ุตูุฑุฉุ ุชุญููู ุฃุญุฌุงู ุงููููุงุชุ ูุงุฌูุฉ ุณููุฉ.

- **ุงููุฏููุนุงุช (Payments)**
  - ููุญุฉ ูุนุงููุงุช: ุนุฑุถ ูุนุงููุงุชุ ููุชุฑุฉ ุจุญุงูุฉ ุงููุนุงููุฉ ููุณุชูู ุงููุฎุงุทุฑุฉ.
  - ุฅุญุตุงุกุงุช ุงููุฏููุนุงุชุ ุฅุฌูุงูู ุงููุจุงูุบุ ุชูุจููุงุช ุฃูุงู.
  - ุฅุฏุงุฑุฉ ููุงุนุฏ ูุดู ุงูุงุญุชูุงู (Fraud Rules): ุชูุนูู/ุชุนุทูู ูุชุนุฏูู ุงูุฃููููุฉ.
  - ุฃุญุฏุงุซ ุฃููููุฉ (Security Events): ูุฑุงุฌุนุฉุ ุญูุ ุญุธุฑ ุนููุงู IP ูุคูุชุงู.
  - ุณุฌูุงุช ุงูุฏูุน (payment logs) ูุงุณุชุฏุนุงุกุงุช rate-limiter.

- **ุงูุนุฑูุถ (Offers)**
  - ุฅูุดุงุก/ุชุนุฏูู/ุญุฐู ุนุฑูุถ ุงูุฏูุน (ูุซูุงู ุฎุตู ุฎุงุต ูุทุฑููุฉ Kashier ุฃู COD).
  - ุชูุนูู/ุชุนุทูู ุนุฑูุถ ูุน ุชุญููู ุจุณูุท ูู ุงูููู.

- **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ / ุฃูุณุงู ุงูุตูุญุฉ (Homepage / Homepage Sections)**
  - ุฅุฏุงุฑุฉ ุฃูุณุงู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ: ุฃููุงุน ูุชุนุฏุฏุฉ (best_sellers, featured, reviews, heroุ ุงูุฎ).
  - ุงุฎุชูุงุฑ ููุชุฌุงุช/ูุฆุงุช ูููุณูุ ุชุฑุชูุจ ุงูุนุฑุถุ ุชูุนูู/ุชุนุทููุ ุฅุนุงุฏุฉ ุชุฑุชูุจ.

- **ุดุฑุงุฆุญ ุงูุนุฑุถ (Hero Slides)**
  - CRUD ูุดุฑุงุฆุญ ุงูุจุงูุฑ: ุฑูุน ุตูุฑุ ูุตูุต ุนุฑุจู/ุฅูุฌููุฒูุ ุฑูุงุจุท ุฏุงุฎููุฉ.

- **ุงูุดุญู (Shipping Zones)**
  - ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ููุงุทู ุงูุดุญูุ ุชุญุฏูุฏ ููุฏ ุงููุญุงูุธุฉุ ูุชูููุฉ ุงูุดุญู.

- **ุงูุฑุณุงุฆู (Messages / Contact)**
  - ุนุฑุถ ุฑุณุงุฆู ุงูุงุชุตุงู ุงููุงุฑุฏุฉ (ุงูุนููุงุก)ุ ุชุงุฑูุฎ ูุจูุงูุงุช ุงููุฑุณู.

- **ุงูุชููููุงุช (Reviews)**
  - ุนุฑุถ ููุฑุงุฌุนุฉ ุชููููุงุช ุงูููุชุฌุ ููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ (ููุจูู/ูุฑููุถ/ููุฏ ุงููุฑุงุฌุนุฉ).

- **ุงูุชุญูููุงุช (Analytics)**
  - ุชูุงุฑูุฑ ุงูุฅูุฑุงุฏุงุช ูุงูุทูุจุงุชุ ูุณุงุฑ ุงูุชุญููู (funnel)ุ ุฃุฏุงุก ุงูููุชุฌุงุชุ ุชูุงุฑูุฑ ููููุฉ.

- **ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ (Settings)**
  - ูููุฐุฌ ูุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ (ุงุณู ุงููุชุฌุฑุ ูุตูุ ุฅุนุฏุงุฏุงุช ุนุงูุฉ) ุนุจุฑ `StoreSettingsForm`.

- **ุฅุฏุงุฑุฉ ุงููููุงุช ูุงูุชุฎุฒูู**
  - ุฑูุน ุตูุฑ ููููุชุฌุงุช ูุงููุฆุงุช ูุดุฑุงุฆุญ ุงูุนุฑุถ ุนุจุฑ ูุงุฌูุงุช `upload` ุงูุฎุงุตุฉ ุจุงูู admin (ุชุณุชุฎุฏู Supabase Storage).

## ูุธุงุฆู ูุฎุฏูุงุช ุฎูููุฉ ูุชุนููุฉ ุจุงูู Admin

- ุงุณุชุฎุฏุงู `createAdminClient()` / `getSupabaseAdminClient()` ูููุตูู ุนุจุฑ Service Role (ูุชุฌุงูุฒ RLS ุนูุฏ ุงูุญุงุฌุฉ).
- Webhooks ููุนุงูุฌุฉ ุงููุฏููุนุงุช ููุฌูุฏุฉ (`/api/payment/webhook`) ูุน ุชุญูู signature.
- ุฃููุงุฏ ูุฑุงูุจุฉ: rate-limiterุ fraud-detectionุ audit-logger ูุชููุฑุฉ ุชุญุช `src/services/payment/`.
- ุตูุญุงุช ูุฅุฌุฑุงุกุงุช admin ุชุณุชุฎุฏู Server Actions (Next.js server actions) ูุนูููุงุช ูุญููุฉ.

## ุฃูู ูุญูุงูุฉ

- Row-Level Security (RLS) ููุนูู ูู ููุงุนุฏ ุงูุจูุงูุงุช (ูุฐููุฑ ูู `SUPABASE_SETUP.md` ู SQL scripts).
- Middleware ูุญูุงูุฉ ุตูุญุงุช `/admin` ููุญุต ุฏูุฑ ุงููุณุชุฎุฏู (`profile.role === 'admin'`).
- ุญูุงูุฉ ุฅุถุงููุฉ ุฃุถููุช ููู `/api/admin/*` ุนุจุฑ Middleware (ุชุฑุฌุน 401/403 ููุทูุจุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง).
- ุชูุฌููุงุช: ุชุฃูุฏ ูู ุญูุธ `SUPABASE_SERVICE_ROLE_KEY` ููุท ูู ุจูุฆุฉ ุงูุณูุฑูุฑ ูุนุฏู ูุดุฑูุง ูู ุงููุณุชูุฏุน.

## ูุชุทูุจุงุช Environment Variables ููููุฒุงุช ุงูุฌุฏูุฏุฉ

### AI Features (Perplexity)
ูุชูุนูู ููุฒุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุชุ ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ุฅูู `.env.local`:

```bash
# Perplexity AI API
PPLX_API_KEY=your_perplexity_api_key_here
PPLX_BASE_URL=https://api.perplexity.ai
PPLX_MODEL=sonar

# Admin API Secret (ุงุฎุชูุงุฑู - ููุฃูุงู ุงูุฅุถุงูู)
ADMIN_API_SECRET=your_admin_secret_here
```

**ููุงุญุธุงุช:**
- ุงุญุตู ุนูู API Key ูู [Perplexity AI](https://www.perplexity.ai)
- `ADMIN_API_SECRET` ุงุฎุชูุงุฑู - ููุท ุฅุฐุง ููุช ุชุฑูุฏ ุทุจูุฉ ุฃูุงู ุฅุถุงููุฉ ููู API routes
- **ูุง ุชุถุน** `ADMIN_API_SECRET` ูู `NEXT_PUBLIC_*` - ุงุชุฑูู server-side ููุท

## ุงูุชุฑุงุญุงุช ุณุฑูุนุฉ ูุจู ุงููุดุฑ

- ุชุดุบูู ุงุฎุชุจุงุฑุงุช ุชูุงูููุฉ ูุนูููุฉ ุงูุฏูุน (create order โ Kashier flow โ webhook โ ุชุญูู DB).
- ูุฑุงุฌุนุฉ ุณูุงุณุงุช RLS ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุชุฃููุฏ ูู ุฃูู ูุง ูููู ููู client ุชุบููุฑ ุณุฌูุงุชู ูุจุงุดุฑุฉ.
- ูุญุต ุณุฌูุงุช ุงููุตูู ูุชููุฆุฉ ุฅุดุนุงุฑุงุช ุนูุฏ ูุฌูุฏ ุฃุญุฏุงุซ ุฃููููุฉ ุญุฑุฌุฉ.
- **ููู AI Features:** ุชุฃูุฏ ูู ุฅุถุงูุฉ `PPLX_API_KEY` ูู `.env.local` ูุจู ุงุณุชุฎุฏุงู ุงูุฃุฒุฑุงุฑ.

## Bullets ุฌุงูุฒุฉ ููู LinkedIn (ูุตูุฑุฉ)

- ููุญุฉ ุฅุฏุงุฑุฉ ูุงููุฉ: ููุชุฌุงุชุ ุทูุจุงุชุ ูุฏููุนุงุชุ ุนุฑูุถุ ูุญุชููุ ูุชุญูููุงุช.
- ุญูุงูุฉ ูุชูุฏููุฉ: RLSุ Webhook signatureุ ุฎุฏูุฉ role client ููููุงู ุงูุญุณุงุณุฉ.
- ุฅุฏุงุฑุฉ ููุงุนุฏ ูุดู ุงูุงุญุชูุงู ูุญุธุฑ IP ูุคูุชูุง ูู ุงููุงุฌูุฉ.
- ุฅุฏุงุฑุฉ ุฃูุณุงู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุดุฑุงุฆุญ ุงูุนุฑุถ ูุน ูุนุงููุฉ ุณุฑูุนุฉ.
- ุฑูุน ุตูุฑ ูุชุนุฏุฏุ SKU ุขููุ ูุฅุฏุงุฑุฉ ูุชุบูุฑุงุช ุงูููุชุฌ.
- **ููุฒุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู:** ุชุญุณูู ูุตู ุงูููุชุฌ ูุชุฑุฌูุฉ ุนุฑุจู-ุฅูุฌููุฒู ุงุญุชุฑุงููุฉ ุจุถุบุทุฉ ุฒุฑ (Perplexity AI).

---

## ููููุฉ ุงุฎุชุจุงุฑ ููุฒุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI)

### ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:

1. **ุฅุนุฏุงุฏ Environment Variables:**
   - ุฃุถู `PPLX_API_KEY` ุฅูู `.env.local`
   - ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ: `npm run dev`

2. **ุงุฎุชุจุงุฑ ูู ุตูุญุฉ Add Product:**
   - ุงุฐูุจ ุฅูู `/admin/products`
   - ุงุถุบุท "ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ"
   - ุงููุฃ:
     - ุงุณู ุงูููุชุฌ (ุนุฑุจู): "ุนุจุงูุฉ ููุงุณูููุฉ"
     - ุงุณู ุงูููุชุฌ (ุฅูุฌููุฒู): "Classic Abaya"
     - ุงููุตู (ุนุฑุจู): ุงูุชุจ ูุตู ุจุณูุท ูุซู "ุนุจุงูุฉ ุณูุฏุงุก ูุทู ูุงุนู ููุงุณ ูุงุญุฏ"
   - ุงุถุบุท ุฒุฑ **"โจ ุชุญุณูู ุงููุตู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู"**
   - ุณูุชู ุชุญุณูู ุงููุตู ุงูุนุฑุจู ุชููุงุฆูุงู
   - ุงุถุบุท ุฒุฑ **"๐ ุชุฑุฌูุฉ ุนุฑุจู โ ุฅูุฌููุฒู (ุงุญุชุฑุงูู)"**
   - ุณูุชู ููุก ุงููุตู ุงูุฅูุฌููุฒู ุชููุงุฆูุงู

3. **ุงุฎุชุจุงุฑ ูู ุตูุญุฉ Edit Product:**
   - ุงุฎุชุฑ ููุชุฌ ููุฌูุฏ ูุงุถุบุท "ุชุนุฏูู"
   - ูู ุชุจููุจ "ุงููุนูููุงุช"ุ ุฌุฑุจ ููุณ ุงูุฃุฒุฑุงุฑ

### ูููุงุช ุชู ุชุนุฏูููุง:
- `src/app/api/ai/rewrite-ar/route.ts` - API route ูุชุญุณูู ุงููุตู ุงูุนุฑุจู
- `src/app/api/ai/translate-to-en/route.ts` - API route ููุชุฑุฌูุฉ ุฅูู ุงูุฅูุฌููุฒูุฉ
- `src/app/admin/products/page.tsx` - ุฅุถุงูุฉ ุงูุฃุฒุฑุงุฑ ูุงูู state management
- `ADMIN_FEATURES.md` - ุงูุชูุซูู

---

ูู ุชุฑููุฏ ุฃู ุฃุถุน ููุณ ุงููุต ุงููุตูุฑ ูููุชุฑุญ ููุดูุฑ LinkedIn ูู ููู ูููุตู `POST_LINKEDIN.md` ุฃู ุชูุถูู ูุณุฎุฉ ููุนุฏููุฉ ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ูุฐููุ
